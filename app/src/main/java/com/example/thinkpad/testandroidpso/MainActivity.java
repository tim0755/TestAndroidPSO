package com.example.thinkpad.testandroidpso;

import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;

import com.org.gandhim.pso.PSOProcess;
import com.org.gandhim.pso.Point;

import java.util.concurrent.Executors;

public class MainActivity extends AppCompatActivity {

    private static final int MAX_POINT = 54;
    private static final double[] matchPoint1X = {-356.0035838644931,-361.69532286976363,-358.15978494695383,-351.70751760927266,-354.811253081204,-371.8846739848574,373.6424257251007,-387.79506960567744,-373.3051622538028,357.6216365896125,364.24823698368573,372.4468910187102,-387.32235334172265,-378.7437295216935,-382.34092095848865,370.10184785854716,368.9450872425047,-360.56755807843274,-359.9901803164014,-363.8304403914823,-361.32499387560705,-351.3478936601751,-342.48077638859996,-349.2799031016914,-354.8571015579213,-338.71050759226637,-320.7044013941911,-325.95153840126335,-318.1350435410825,-346.1249215903518,-322.81622358744056,-322.74313369626,-319.3901779786234,271.1683808116664,262.3478571139933,370.51754928627264,-356.06190077436287,380.3869143045001,362.6213176619626,-349.5507646301982,-320.9707367365231,-348.84180356105685,370.6604542942628,371.4360892475616,-374.2703544792534,373.00514829724955,354.9676888132534,344.68969741818387,-342.20466429112963,-349.0281582715754,-337.1979413329334,-331.8274908442569,-329.06172716807276,349.3275363683906};
    private static final double[] matchPoint1Y = {-125.2902067290556,-48.70681700568469,-40.17189589717196,-30.85770602458124,-26.304023594111825,-21.19100656323463,7.701196518030051,18.238865192189714,15.858216334371232,16.7096565904635,17.534172140642518,18.26896151942747,22.912429153671336,22.721806756173606,28.521250251283497,37.75119702030433,38.575880587594476,125.21332144497464,134.8187201193988,139.2247076188347,139.65984675118412,136.758695988745,137.2610992392912,145.23746295641513,150.72725152378115,143.78537565539057,136.98406048164392,143.18941978484585,150.45155013301007,165.39456426018185,160.00184461160597,173.5045003524431,182.3882138383474,252.32244924252078,266.53133540629545,-49.20740521639569,-38.1044476540163,-22.650542745645872,61.58593701086259,127.61093033590163,136.5194469537457,-126.97048618793009,-48.80303678860654,-24.801311199411952,16.348668264968854,15.830796116102588,52.477909452683924,54.47394713941585,139.24369621776702,144.96334749296884,167.5907784416241,166.42167885926924,175.5402801108831,82.71855238655597};
    private static final double[] matchPoint2X = {350.3047817432493,375.2354274373126,379.48022391419096,386.93503530388404,385.05896649986187,368.5857139472948,-357.88512489321647,353.36900661285017,368.76687555603917,-372.0352069682329,-366.12151717237657,-358.2849369300819,352.82866677804446,362.06956577489603,357.33882993022746,-360.22626230002055,-360.81837245100974,337.1270593173036,333.20421270018716,326.61634328493136,328.6585050086651,337.3447029033017,343.5617688107302,333.44111114294464,325.9558259335107,341.9066072935654,357.7267416637662,350.1364522562393,349.5478363506482,320.2593291547994,339.5915755274793,329.8643558294687,324.92172316611044,-265.11542729054094,-250.32356122086478,-356.7804304168254,381.4589949080519,-351.91961505285855,-360.33521043523353,343.4034367353911,358.0946737264058,355.48781869594643,-357.09856288581204,-359.9872248354584,367.8297917013088,-358.6460731850004,-370.234218833932,-377.56464257712173,342.50886005560636,334.0616470805755,326.98637255284757,331.1030653530475,324.4059383692009,-363.60274797302};
    private static final double[] matchPoint2Y = {-122.95970660484221,-51.70391715812453,-44.62548714005757,-35.80607380565959,-30.278488922484854,-24.71377304139648,-3.4603745020232854,12.01074545939018,11.299082213207022,6.257443897554034,7.127900221130051,8.534128761059971,15.820829252710944,17.663904897334497,22.923172215135864,26.549703012621826,28.816368388776652,107.75065710194025,117.22340394586016,117.47019333380051,119.48398745466264,125.02524539409596,130.389606405526,130.97707498913823,130.0830545094624,135.988720269055,145.44041881771398,146.01659460747936,156.62759216219817,144.09870675901706,161.27064230308721,167.9183457588268,176.36433305178113,243.55664395142992,254.05220920434795,-60.06392815392706,-43.65304343439708,-33.09750989180662,51.6797003274443,117.67656496382828,144.78392506849858,-128.18736518234255,-58.52936238558798,-35.312603678406084,11.3953661605618,7.161353367556732,45.66606532047811,52.359818265298685,131.36007115664677,131.21318972506563,151.07166068387,154.7267579969545,164.3132963442531,77.91507456038413};

    Point[] points1 = new Point[MAX_POINT];
    Point[] points2 = new Point[MAX_POINT];

    private boolean mRunning = false;
    private double[] result;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Executors.newFixedThreadPool(1).execute(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    if (!mRunning) {
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                        }
                        continue;
                    }
                    //mRunning = false;

                    //long time = System.currentTimeMillis();
                    //mPSOProcess = new PSOProcess(points1, points2);
                    result = new PSOProcess(points1, points2).execute();
                    //System.out.println("time:" + (System.currentTimeMillis() - time));

                    /*System.out.print("result:(");
                    for (int i = 0; i < PSOConstants.PROBLEM_DIMENSION; i++) {
                        System.out.print("" + result[i] + " , ");
                    }
                    System.out.println(")");*/
                }
            }
        });

        for (int i = 0; i < MAX_POINT; i++) {
            points1[i] = new Point(matchPoint1X[i], matchPoint1Y[i]);
            points2[i] = new Point(matchPoint2X[i], matchPoint2Y[i]);
        }
        mRunning = true;
    }
}
