package com.example.thinkpad.testandroidpso;

import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;

import com.org.gandhim.pso.PSOConstants;
import com.org.gandhim.pso.PSOProcess;
import com.org.gandhim.pso.Point;

import java.util.concurrent.Executors;

public class MainActivity extends AppCompatActivity {

    private static final int MAX_POINT = 34;
    private static final double[] matchPoint1X = {-321.25970808822024,-320.6228460464499,-371.28012959022834,-367.2993722354245,-358.5905498860076,-375.0793756956306,-392.65007830164706,-368.76744208519966,-352.65245743290893,343.5066272432891,353.31281096128885,344.41079796123375,-348.3105824845815,-355.3823805625555,-355.8032772865083,-342.2857557587677,-338.061446117202,-355.44537169997005,333.056690724333,-307.6623845118953,313.887713618903,306.41992237160486,-363.0537632645486,-348.6607850444532,-354.9880239244006,360.5823542984679,-369.94543187595264,-364.76182597710937,-386.4450798074227,-357.2369221212383,-350.4069509825201,-336.7302772810239,314.33218915651065,312.92850673913387};
    private static final double[] matchPoint1Y = {-160.41474202786105,-155.2568458087939,-43.57030333093597,-32.53463181002282,-19.03342287478435,-16.877173240510814,10.58618500330094,14.483011386166764,17.566793331362224,24.62208913279391,26.096038874080246,31.59220153264204,107.6167381837153,119.75374539295359,129.4971979212497,132.01906538790473,127.56118326023383,137.7927127084067,144.10403027860033,153.9977131309356,171.54220769317817,182.84917029937571,97.29061886634551,-108.36656705824302,129.02574255081097,-54.75079090373238,-26.598217372666607,-19.363709233134948,25.300838928767867,25.41127185107289,102.57054241573168,126.32213499911761,171.45727823151842,188.84449344084203};
    private static final double[] matchPoint2X = {349.23771344726447,353.16244612554357,366.0674384662765,372.5051688508218,382.1634592570886,366.72325468966034,348.11503255197346,372.0290488339621,386.6741572124318,-385.9010377172031,-377.6873461395415,-384.03077147421146,356.68879390056026,343.49552604451407,338.6998640238864,346.87183798333336,352.98153884241304,333.82385647845666,-336.0650506744036,352.0423720209618,-324.2157590917449,-318.06336579735535,350.03979567863644,365.1659925021429,339.28819324524875,-365.70581366680847,370.17549428959126,376.3759333946813,353.3517009476789,381.2003421065392,358.0420534495238,354.56330152359806,-324.3068139493501,-309.70270508197086};
    private static final double[] matchPoint2Y = {-169.45729002603332,-167.14258369563558,-45.48195337441025,-35.22693921578731,-22.033067526049194,-19.691403577855457,6.354582834832803,11.196660629156193,15.730988467086375,17.727738712828128,16.752084490611256,25.388987843569616,103.91515016718294,109.06238427479363,116.15106058776831,126.85809113916274,126.2913068540671,121.4985760765197,139.53041143424653,168.02225416897693,172.46888739294553,184.9723013872823,88.07879044353301,-112.5578248985949,116.37060272749437,-68.18990300120207,-29.54854377463726,-22.31614150743932,18.63390796537208,22.343593694497606,99.00439469001584,126.08365992971703,171.6786732576979,182.72588903161846};

    Point[] points1 = new Point[MAX_POINT];
    Point[] points2 = new Point[MAX_POINT];

    private boolean mRunning = false;
    private double[] result;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Executors.newFixedThreadPool(1).execute(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    if (!mRunning) {
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                        }
                        continue;
                    }
                    //mRunning = false;

                    //long time = System.currentTimeMillis();
                    //mPSOProcess = new PSOProcess(points1, points2);
                    result = new PSOProcess(points1, points2).execute();
                    //System.out.println("time:" + (System.currentTimeMillis() - time));

                    /*System.out.print("result:(");
                    for (int i = 0; i < PSOConstants.PROBLEM_DIMENSION; i++) {
                        System.out.print("" + result[i] + " , ");
                    }
                    System.out.println(")");*/
                }
            }
        });

        for (int i = 0; i < MAX_POINT; i++) {
            points1[i] = new Point(matchPoint1X[i], matchPoint1Y[i]);
            points2[i] = new Point(matchPoint2X[i], matchPoint2Y[i]);
        }
        mRunning = true;
    }
}
